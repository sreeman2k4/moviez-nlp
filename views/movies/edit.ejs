
<%layout("./layouts/boilerplate")%>
<link rel="stylesheet"  href="/stylesheets/buttons.css">



<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">Moviez</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/movies">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/account">Account</a>
        </li>
        <li class="nav-item">
          <a class="nav-link"type="button" class="btn btn-outline-success" href="/logout">logout</a>
        </li>
       
      </ul>
     
    </div>
  </div>
</nav>






    <h1>edit movie</h1>
    <form action="/movies/<%=movie._id%>?_method=PUT" novalidate class="validated-form"  method="POST" enctype="multipart/form-data">
     <div>
        <div>
            <label for="name"class="form-label">name:</label>
            <input type="text"class="form-control" name="movie[name]"id="name"required value="<%=movie.name%>">
         </div>
         <div>
            <label for="language"class="form-label">language:</label>
            <select name="movie[language]" id="language">
                <%for(let language of languages){%>
                    <option value="<%=language%>"<%=movie.language===language?"selected":""%>><%=language%></option>
                <%}%>
            </select>
         </div>
         <div>
            <label for="genre"class="form-label">genre:</label>
            <select name="movie[genre]" id="genre">
                <%for(let genre of genres){%>
                    <option value="<%=genre%>"<%=movie.genre===genre?"selected":""%>><%=genre%></option>
                <%}%>
            </select>
         </div>
         <div>
            <label for="rating"class="form-label">rating:</label>
            <input type="text"class="form-control" name="movie[rating]" id="rating" value="<%=movie.rating%>">
         </div>
         <div>
            <label for="hero"class="form-label">hero:</label>
            <input type="text"class="form-control" name="movie[hero]"id="hero"value="<%=movie.hero%>">
         </div>
         <div>
            <label for="heroine"class="form-label">heroine:</label>
            <input type="text"class="form-control" name="movie[heroine]"id="heroine"value="<%=movie.heroine%>">
         </div>
         <div>
            <label for="storyline"class="form-label">story line:</label>
            <input name="movie[storyline]" class="form-control"cols="30"rows="10" value="<%=movie.storyline%>"></input>
         </div>
         <div>
            <label for="year"class="form-label">year:</label>
            <input type="text"class="form-control" name="movie[year]"id="year"value="<%=movie.year%>">
         </div>
         <div>
            <label for="ott"class="form-label">ott:</label>
            <input type="text"class="form-control" name="movie[ott]"id="ott"value="<%=movie.ott%>">
         </div>
         <div>
            <label for="images"class="form-label">add image(s):</label>
            <input type="file" name="images"multiple id="images">
         </div>
         <div class="mb-3">
          <%movie.images.forEach(function(image,i){%>
            <img src="<%=image.url%>" class="img-thumbnail" style="width:10em;height:10em">
            <div class="form-check-inline">
              <input type="checkbox" id="image-<%=i%>"name="deleteimages[]" value="<%=image.filename%>">
            </div>
            <label for="">delete</label><br>
          <%})%>
         </div>
         <div class="cont">  
          <button class="btn"><span>Submit</span><img src="https://i.cloudup.com/2ZAX3hVsBE-3000x3000.png" height="62" width="62"></button>

              
          </div>
     </div>
    </form>
    <br>
    <a class="btn btn-primary"href="/movies/<%=movie._id%>">back</a>
    <script>
      // Example starter JavaScript for disabling form submissions if there are invalid fields
     (function () {
       'use strict'
     
       // Fetch all the forms we want to apply custom Bootstrap validation styles to
       const forms = document.querySelectorAll('.validated-form')
     
       // Loop over them and prevent submission
       Array.from(forms)
         .forEach(function (form) {
           form.addEventListener('submit', function (event) {
             if (!form.checkValidity()) {
               event.preventDefault()
               event.stopPropagation()
             }
     
             form.classList.add('was-validated')
           }, false)
         })
     })()
         </script>
    
